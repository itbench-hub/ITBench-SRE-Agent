# SRE Tools Manifest - MCP Server Registry
# This file defines all available MCP tools that can be enabled in Zero
#
# Supported placeholders (resolved at runtime):
#   {python}    - Current Python interpreter (sys.executable)
#   {workspace} - Session directory path
#   {sre_tools} - Path to sre_tools package
#
# For local Python tools, PYTHONPATH is automatically set to find sre_tools.

# ============================================================================
# STDIO-based MCP Servers (command-line tools)
# ============================================================================

[tools.sre_utils]
description = "SRE utility functions for incident investigation (parse events, analyze metrics, correlate alerts)"
type = "stdio"
command = "{python}"
args = ["-m", "sre_tools.cli.sre_utils"]
# Note: PYTHONPATH is auto-configured when args contain "sre_tools"

# ----------------------------------------------------------------------------
# Kubernetes MCP Server (https://github.com/containers/kubernetes-mcp-server)
# ----------------------------------------------------------------------------
# Full-featured Kubernetes MCP server with support for:
# - Pod, Deployment, Service, ConfigMap, Secret management
# - Log retrieval and event watching
# - Kiali integration for service mesh observability
# - KubeVirt support for VMs
# - Helm chart operations
#
# Install: npm install -g kubernetes-mcp-server
# Or run via npx (no install needed)
#
# Requires: kubectl configured with cluster access
# ----------------------------------------------------------------------------

[tools.kubernetes]
description = "Full-featured Kubernetes MCP server - pods, deployments, services, logs, events, Helm, Kiali, KubeVirt"
type = "stdio"
command = "npx"
args = ["-y", "kubernetes-mcp-server@latest"]
# Environment variables for configuration (optional)
# env = { "KUBECONFIG" = "/path/to/kubeconfig" }
# Whitelist additional env vars to pass through
env_vars = ["KUBECONFIG", "KUBERNETES_SERVICE_HOST", "KUBERNETES_SERVICE_PORT"]

# Alternative: Use locally installed binary (faster startup, no npx overhead)
# [tools.kubernetes]
# description = "Full-featured Kubernetes MCP server"
# type = "stdio"
# command = "kubernetes-mcp-server"
# args = []

# ============================================================================
# HTTP-based MCP Servers (external services)
# ============================================================================
# Uncomment and configure as needed for your environment

# [tools.datadog]
# description = "Datadog observability integration"
# type = "http"
# url = "https://mcp.datadoghq.com/mcp"
# bearer_token_env_var = "DATADOG_API_KEY"

# [tools.dynatrace]
# description = "Dynatrace monitoring integration"
# type = "http"
# url = "https://your-instance.dynatrace.com/mcp"
# bearer_token_env_var = "DYNATRACE_API_TOKEN"

# [tools.instana]
# description = "Instana APM integration"
# type = "http"
# url = "https://your-tenant.instana.io/mcp"
# bearer_token_env_var = "INSTANA_API_TOKEN"

